<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Restaurant</title>
</head>
<body>
    <h1>Bienvenue Admin</h1>

    <header>
        <ul>
            <li><a href="{% url 'index' %}">Logo</a></li>
            <li><a href="{% url 'index' %}">Statistiques</a></li>
            <li><a href="{% url 'restaurant_list' %}">Restaurant</a></li>
            <li><a href="{% url 'zone_list' %}">Secteur</a></li>
            {% comment %} <li><a href="{% url 'livraison_list' %}">Livraison</a></li> {% endcomment %}
        </ul>
    </header>

    <section>
        <h2>Filtrer les Restaurants</h2>

        <form method="get" action="" id="filtre-form">
            <label for="zone">Zone :</label>
            <select name="zone" id="zone" onchange="document.getElementById('filtre-form').submit();">
                <option value="">-- Toutes les zones --</option>
                {% for zone in zones %}
                    <option value="{{ zone.id }}" {% if zone.id == selected_zone %}selected{% endif %}>{{ zone.nom }}</option>
                {% endfor %}
            </select>

            <label for="statut">Statut :</label>
            <select name="statut" id="statut" onchange="document.getElementById('filtre-form').submit();">
                <option value="">-- Tous les statuts --</option>
                {% for s in statuts %}
                    <option value="{{ s.id }}" {% if s.id == selected_statut %}selected{% endif %}>{{ s.appellation }}</option>
                {% endfor %}
            </select>
        </form>
    </section>

    <section>
        <h2>Liste des Restaurants</h2>

        {% for restaurant in restaurants %}
        <div>
            <h3>{{ restaurant.nom }}</h3>

            {% if restaurant.image %}
                <img src="{{ restaurant.image.url }}" alt="Image du restaurant {{ restaurant.nom }}">
            {% endif %}

            <p><strong>Secteurs desservis :</strong> {{ restaurant.secteurs|join:", " }}</p>
            <p><strong>Commission actuelle :</strong> {{ restaurant.commission }} %</p>
            <p><strong>Statut :</strong> {{ restaurant.statut }}</p>

            <p><strong>Horaires :</strong></p>
            <ul>
                {% for horaire in restaurant.horaire %}
                    <li>
                        {% if horaire.le_jour == 0 %}Lundi
                        {% elif horaire.le_jour == 1 %}Mardi
                        {% elif horaire.le_jour == 2 %}Mercredi
                        {% elif horaire.le_jour == 3 %}Jeudi
                        {% elif horaire.le_jour == 4 %}Vendredi
                        {% elif horaire.le_jour == 5 %}Samedi
                        {% elif horaire.le_jour == 6 %}Dimanche
                        {% else %}Jour {{ horaire.le_jour }}
                        {% endif %}
                        : {{ horaire.horaire_debut }} - {{ horaire.horaire_fin }}
                    </li>
                {% endfor %}
            </ul>

            <!-- Boutons d'action -->
            <form action="#" method="get" style="display:inline;">
                <button type="submit">Modifier</button>
            </form>

            <form action="#" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit">Supprimer</button>
            </form>

            <form action="{% url 'restaurant_commandes' restaurant.id %}" method="get" style="display:inline;">
                <button type="submit">Info commande</button>
            </form>

            <form action="#" method="get" style="display:inline;">
                <button type="submit">DÃ©tail financier</button>
            </form>

            <hr>
        </div>
        {% endfor %}

    </section>
    <div style="text-align:center; margin-top: 20px;">
        <form action="{% url 'restaurant_add_form' %}" method="get">
            <button type="submit">Ajouter un restaurant</button>
        </form>
    </div>
</body>
</html>
