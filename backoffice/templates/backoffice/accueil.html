<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistique</title>
</head>
<body>
    <h1>Bienvenue Admin</h1>
    <header>
        <ul>
            <li><a href="{% url 'index' %}">Logo</a></li>
            <li><a href="{% url 'stats_dashboard' %}">Statistiques</a></li>
            <li><a href="{% url 'backoffice_restaurant_list' %}">Restaurant</a></li>
            <li><a href="{% url 'zone_list' %}">Secteur</a></li>
            <li><a href="{% url 'livreur_list' %}">Livreurs</a></li>
        </ul>
    </header>

    <section>
        <h2>Filtrer par statut</h2>
        <form method="get">
            <select name="statut" onchange="this.form.submit()">
                <option value="">-- Tous les statuts --</option>
                {% for statut in statuts %}
                    <option value="{{ statut.appellation }}" {% if request.GET.statut == statut.appellation %}selected{% endif %}>
                        {{ statut.appellation }}
                    </option>
                {% endfor %}
            </select>
        </form>
    </section>

    <section>
        <h2>Liste des commandes</h2>
        <table border="1">
            <thead>
                <tr>
                    <th>Client</th>
                    <th>Point de récupération</th>
                    <th>Date/Heure</th>
                    <th>Statut</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                {% for commande in commandes %}
                <tr>
                    <td>{{ commande.client }}</td>
                    <td>{{ commande.point_recup }}</td>
                    <td>{{ commande.cree_le }}</td>
                    <td>{{ commande.statut }}</td>
                    <td>
                        {% if commande.statut == "Prête" %}
                        <a href="{% url 'commande_attribuer' commande.id %}" class="btn-attribuer">
                            Attribuer
                        </a>
                        {% else %}
                        <!-- Rien à afficher -->
                        {% endif %}
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="5">Aucune commande trouvée.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>
</body>
</html>
